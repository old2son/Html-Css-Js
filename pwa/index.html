<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<link rel="manifest" href="manifest.json">
</head>
<body>

<script type="text/javascript">
if ('serviceWorker' in navigator) {
	window.addEventListener('load', function() {
		var version = '1.0.1';  // 版本号
		navigator.serviceWorker.register('sw.js')
		.then(function(registration) {
			console.log('ServiceWorker registration successful with scope:' , registration.scope)
			// 更新版本号
			if (localStorage.getItem('sw_version') !== version) {
				registration.update().then(function () {
					localStorage.setItem('sw_version', version)
				});
			} 
		})
		.catch(function(err) {
			console.log('ServiceWorker registration failed', err)
		});
	});
}
</script>
</body>
</html>