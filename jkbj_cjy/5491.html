<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>5491_202403060946</title>
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1" />
<script src="js/jquery-1.11.3.min.js"></script>
<script src="js/html2canvas.min.js"></script>
<style>
	@font-face {
		font-family: SourceHanSansCN-Heavy;
		src: url('css/font/SourceHanSansCN-Heavy.otf');
	}

	@font-face {
		font-family: SourceHanSansCN-Bold;
		src: url('css/font/SourceHanSansCN-Bold.otf');
	}

	@font-face {
		font-family: SourceHanSansCN-Regular;
		src: url('css/font/SourceHanSansCN-Regular.otf');
	}

	:root {
		--main-bdr-color: #3c2325;
		--title-color: #362d2f;
		--title-stroke-color: #3e2308;
		--subtitle-color: #362d2f;
		--subtitle-bg-color: #fffde6;
		--text-color: #362d2f;
		--summary-color: #362d2f;
		--key-color: #ec6941;
		--key-bg-color: #000;
		--list-key-color: #ec6941;
		--list-circle-bdr-color: #000;
		--list-circle-bg-color: #f9ff58;
	}

	ul {
		padding: 0;
		margin: 0;

		li {
			padding: 0;
			margin: 0;
			list-style: none;
		}
	}

	h1 {
		margin: 0;
	}

	p {
		margin: 0;
		padding: 0;
	}

	i {
		font-style: normal;
	}

	.bg {
		width: 1200px;
		height: 1600px;
		margin: auto;
		overflow: hidden;
		background: url(img/bg/bg_202403060946.jpg) center top no-repeat;
	}

	.content {
		width: 1000px;
		margin: 0px auto;
	}

	.title-wrap {
		padding-top: 35px;
		text-align: center;

		h1 {
			display: inline-block;
			position: relative;
			line-height: 88px;
			margin: 105px auto 95px;
			text-align: center;
			color: var(--title-color);
			font-size: 60px;
			font-family: SourceHanSansCN-Bold;
		}
	}

	.text-wrap {
		position: relative;

		img {
			display: block;
			position: absolute;
			right: 0;
			top: 50%;
			object-fit: cover;
			transform: translateY(-50%);
		}

		.text {
			position: relative;
			line-height: 88px;
			padding: 0px 0px 0 30px;
			/* padding: 0px 30px 0 30px; */
			/* margin-top: 30px; */
			text-indent: 1.5em;
			text-align: left;
			color: var(--text-color);
			font-size: 46px;
			font-family: SourceHanSansCN-Regular;

			&::after {
				position: absolute;
				left: 47px;
				top: 33px;
				content: '';
				width: 18px;
				height: 18px;
				border-radius: 50%;
				border: 4px solid var(--main-bdr-color);
				background-color: #ffb981;
			}

			b {
				font-weight: 700;
			}

			i {
				/* text-shadow: var(--text-color) 0 2px 1px; */
				/* -webkit-text-stroke-width: 0.1px;
				-webkit-text-stroke-color: var(--text-color); */
				color: var(--key-color);
				font-weight: 700;
			}
		}

		.subtitle {
			display: inline-block;
			position: relative;
			line-height: 88px;
			padding: 0px 30px;
			/* margin: 20px 0 0; */
			color: var(--subtitle-color);

			.right {
				position: relative;
				z-index: 2;
				float: left;
				color: var(--subtitle-color);
				font-size: 46px;
				font-family: SourceHanSansCN-Bold;
			}

			.line {
				position: absolute;
				left: 25px;
				right: 25px;
				bottom: 15px;
				z-index: 1;
				content: '';
				height: 25px;
				border-radius: 10px;
				background-color: rgba(219, 171, 39, 0.3);
			}
		}
	}

	.summary {
		position: relative;
		line-height: 72px;
		padding: 30px 100px;
		margin-top: 50px;
		border: 4px dashed var(--summary-color);
		border-radius: 20px;
		/* text-align: left; */
		text-align: center;
		color: var(--summary-color);
		font-size: 46px;
		font-family: SourceHanSansCN-Regular;
		/* background: url(img/item/border_001.png) center top no-repeat;
		background-size: 100% 100%; */

		&::before {
			position: absolute;
			left: 50px;
			top: 80px;
			content: '';
			width: 46px;
			height: 46px;
			background: url(img/item/icon_start_001.png) center no-repeat;
			background-size: 100%;
		}

		&::after {
			position: absolute;
			right: 50px;
			bottom: 70px;
			content: '';
			width: 46px;
			height: 46px;
			background: url(img/item/icon_start_001.png) center no-repeat;
			background-size: 100%;
		}

		i {
			position: relative;
			z-index: 1;
			color: var(--list-key-color);
			font-weight: 700;

			&::after {
				position: absolute;
				left: 0;
				right: 0;
				bottom: -10px;
				content: '';
				z-index: -1;
				content: '';
				height: 25px;
				background-color: rgba(163, 231, 117, 0.3);
			}
		}

		i.first {
			&::after {
				border-radius: 8px 0 0 8px;
			}
		}

		i.last {
			&::after {
				border-radius: 0 8px 8px 0;
			}
		}
	}

	/* .pic-wrap {
		position: relative;
		padding-right: 300px;

		img {
			display: block;
			position: absolute;
			right: 0;
			top: 50%;
			object-fit: cover;
			transform: translateY(-50%);
		}
	} */
</style>
</head>

<body>
<div class="bg" id="html-canvas">
	<div class="title-wrap">
		<h1 id="title"></h1>
	</div>
	<div class="content" id="content"></div>
</div>
</body>
<script>
	var jsonText = [
		{
			title: '木耳隔夜能吃吗？答案让你大吃一惊！',
	
			page: [
				{
					
					content: [
						/* {
							subtitle: `木耳的营养价值和功效`,
							subContent:
								`
									木耳是一种营养价值很高的食用菌，含有丰富的<span>蛋白质、维生素和矿物质</span>。它具有很好的<span>补血养颜、润肺止咳</span>的功效，被誉为“菌中之冠”。
									<br><br>
								`,
							picUrl: 'img/object/food_098.png',
							picStyle: `top: 350px;right:50%;width: 35%;margin-right: -250px;transform:translateX(50%);`
						},
						{
							subtitle: `隔夜木耳还能吃吗？`,
							subContent:
								`
									答案是肯定的！只要<span>保存得当</span>，<span>木耳隔夜是可以食用</span>的。
								`,
							picUrl: 'img/object/food_099.png',
							picStyle: `top: 200px;right:50%;width: 40%;margin-right: 0px;transform:translateX(50%);`
						}, */
						
						/* {
							subtitle: `木耳隔夜注意事项`,
							subContent:
								`
									<b>密封保存：</b>将剩余的木耳放入<span>密封容器</span>中，然后放入<span>冰箱冷藏</span>。这样可以防止木耳<span>受潮</span>变质。
									<br><br>
								`,
							picUrl: 'img/object/kitchen_001.png',
							picStyle: `top: 240px;right:50%;width: 20%;margin-right: 100px;transform:translateX(50%);`
						},
						{
							subContent:
								`
									<b>尽快食用：</b>虽然木耳隔夜可以吃，但还是建议大家尽量在短时间内食用完毕。因为随着时间的推移，木耳的<span>口感和营养会逐渐流失</span>。
									<br><br>
								`,
						},
						{
							subContent:
								`
									<b>观察颜色和气味：</b>如果发现木耳的颜色变暗或者有异味，那么最好不要食用。这可能是木耳已经<span>变质的迹象</span>。
								`,
						}, */

						{
							subtitle: `每天吃多少木耳比较合适`,
							subContent:
								`
									<b>成人每日推荐摄入量：</b>根据中国营养学会的建议，成年人<span>每天</span>应摄入<span>25克左右</span>的木耳。
								`,
						},
						{
							subContent:
								`
									<b>儿童减半：</b>对于儿童来说，<span>每天</span>的木耳摄入量应该减半，大约在<span>12克</span>左右。
									<br><br>
								`,
							picUrl: 'img/object/stomach_006.png',
							picStyle: `top: 145px;right:50%;width: 25%;margin-right: -360px;transform:translateX(50%);`
						},
						{
							subtitle: `哪些人不宜吃木耳`,
							subContent:
								`
									<b>脾胃虚寒者：</b>木耳性寒，脾胃虚寒的人食用过多木耳可能会导致<span>腹泻、腹痛</span>等不适症状。
								`,
						},
						{
							subContent:
								`
									<b>孕妇：</b>孕妇在饮食上需要格外注意，虽然木耳营养丰富，但并不适合所有孕妇食用。建议在<span>医生指导</span>下适量食用。
								`,
						},
					],
				},
			]
		}
	];
	
	function setHtml() {
		var html = '';
	
		jsonText.forEach(function (item) {
			var setTitle = item.title || '';
			var setObj = item.page;
	
			setObj.forEach(function (obj, i) {
				html = '';
				
				obj.content?.forEach(function (contentItem, j) {
					if (contentItem.subContent) {
						html += `
							<div class="text-wrap" id="wrap-${j}">
								${contentItem.subtitle ? `
									<div class="subtitle">
										<p class="right">${contentItem.subtitle}</p>
										<i class="line"></i>
									</div>
								` : ''}
								<p class="text">${contentItem.subContent}</p>
								${contentItem.picUrl ? `<img style="${contentItem.picStyle}" src="${contentItem.picUrl}">` : ''}
							</div>
						`;
					} 
					else if (contentItem.summary) {
						html += `
							<div class="summary-wrap" id="wrap-${j}">
								${contentItem.subtitle ? `
									<div class="summary-title">
										<p class="right">${contentItem.subtitle}</p>
										<i class="line"></i>
									</div>
								` : ''}
								<div class="summary">
									<p>${contentItem.summary}</p>	
								</div>
								${contentItem.picUrl ? `<img style="${contentItem.picStyle}" src="${contentItem.picUrl}">` : ''}
							</div>
						`;
					}
	
					contentItem.list?.forEach(function (listItem, k, arr) {
						if (k === 0) {
							html += `<ul class="list-attention js-list-attention" id="js-list-attention-${j}"><li>${listItem}</li>`;
						}
						else if (k === arr.length - 1) {
							html += `<li>${listItem}</li></ul>`;
						}
						else {
							html += `<li>${listItem}</li>`;
						}
					});
				});
	
				var $tl = document.getElementById('title');
				var $cont = document.getElementById('content');
				if ($tl) {
					$tl.innerHTML = setTitle;
				}
	
				$cont.innerHTML = html;
	
				insertList();
				setKeyWords();
				/* saveImg(setTitle, i); */
			});
		}); 
	}
	
	function saveImg(setTitle = '', j = 0) {
		var realHtml = document.getElementById('html-canvas');
		var width = 1200; //获取dom 宽度
	
		var img_type = 'jpeg';
		// var height = realHtml.offsetHeight; //获取dom 高度
		var height = 1600; //获取dom 高度
		var canvas = document.createElement('canvas'); //创建一个canvas节点
		var scale = 1; //定义任意放大倍数 支持小数
		canvas.width = width * scale; //定义canvas 宽度 * 缩放
		canvas.height = height * scale; //定义canvas高度 *缩放
		canvas.getContext('2d').scale(scale, scale); //获取context,设置scale
		var opts = {
			tainttest: true, //检测每张图片都已经加载完成
			scale: scale, // 添加的scale 参数
			useCORS: true,
			canvas: canvas, //自定义 canvas
			logging: true, //日志开关
			width: width, //dom 原始宽度
			height: height, //dom 原始高度
			name: 'pic'
		};
		html2canvas(realHtml, opts).then(function (canvas) {
			var imgUri = canvas.toDataURL('image/' + img_type, 0.9);
			var saveLink = document.createElement('a');
			saveLink.href = imgUri;
			saveLink.download = setTitle + (j + 1) + '.' + (img_type === 'jpeg' ? 'jpg' : img_type);
			saveLink.click();
		});
	}
	
	function setKeyWords(parent = document) {
		const spans = parent.querySelectorAll('span');
		spans.forEach((span, i) => {
			const text = span.textContent;
			const characters = text.split('');
			const wrappedCharacters = characters.map((char, index, arr) => {
				if (index === 0) {
					return `<i class="first">${char}</i>`;
				}
				else if (index === arr.length - 1) {
					return `<i class="last">${char}</i>`;
				}
				else {
					return `<i>${char}</i>`;
				}
			});
			const wrappedText = wrappedCharacters.join('');
			span.outerHTML = wrappedText;
		});
	}
	
	function insertList () {
		document.querySelectorAll('.js-list-attention').forEach((item, i) => {
			var str = item.id.split('-')
			var id = str[str.length - 1];
			document.querySelector(`#wrap-${id} .summary`).appendChild(item);
		});
	}
	
	setHtml()
</script>
</html>
