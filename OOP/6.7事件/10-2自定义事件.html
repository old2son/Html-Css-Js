<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>自定义事件</title>
	<script>

		// var arr = [function(){},function(){}];
		// var arr = [];
		// arr.push(function(){
		// 	console.log('1+1=?');
		// });
		// arr.push(function(){
		// 	console.log('端午节纪念谁?');
		// });
		// arr.push(function(){
		// 	console.log('中国的首都是哪里?');
		// });
		// arr.push(function(){
		// 	console.log('先有鸡还是先有蛋?')
		// });
		// // for(var k in arr){
		// // 	arr[k]();
		// // }
		// for(var i=0;i<arr.length;i++){
		// 	arr[i]();
		// }

		/*----用一个函数把上面执行-----*/
		/*
		// 数组结构
		var arr1 = [function(){console.log(1+1)}]
		var arr2 = [function(){console.log('中国首都在哪')}];
		var listener = {
			math : arr1,
			culture : arr2
		}
		*/


		// 添加自定义事件，模拟触发器
		// obj 为对象，给这个特定对象添加事件
		function addEvent(obj,type,fn){
			// 给 obj 添加一个listener属性
			// 判断这个属性是否有对象，没就加一个
			obj.listener = obj.listener || {};
			// 给这个对象的属性值添加一个数组，既添加属性，也添加了值
			obj.listener[type] = obj.listener[type] || [];
			obj.listener[type].push(fn);
		}
		// 触发事件 
		function fireEvent(obj,type){
			// 获取数组
			var listener = obj.listener[type];
			for(var i=0;i<listener.length;i++){
				listener[i]();
			}
		}
		window.onload = function() {
			/* 
			传入参数的参数后：
			div.listener = {};
			div.listener = {
				math : []
			}
			div.listener = {
				math : [function(){console.log('1+1=?')}]
			}
			*/
			var div = document.getElementById('div');
			addEvent(div,'math',function(){
				console.log('1+1=?');
			});
			var div = document.getElementById('div');
			addEvent(div,'math',function(){
				console.log('1+2=?');
			});
			var div = document.getElementById('div');
			addEvent(div,'math',function(){
				console.log('3+5=?');
			});
			var div = document.getElementById('div');
			addEvent(div,'culture',function(){
				console.log('先有鸡还是先有蛋?');
			});
			var div = document.getElementById('div');
			addEvent(div,'culture',function(){
				console.log('端午节是谁发明的?');
			});
			var div = document.getElementById('div');
			addEvent(div,'culture',function(){
				console.log('中国有首都的吗?');
			});

			fireEvent(div,'math');
			fireEvent(div,'culture');
		}
	</script>
</head>
<body>
	<div id='div'>0 .0</div>
</body>
</html>