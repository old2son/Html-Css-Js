<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>拖拽案例(普通)</title>
	<style type="text/css">
    *{margin: 0;padding: 0;}
    #drag{width: 100px;height: 100px;background: crimson;position: absolute;}
    </style>
    <script>
    /*
	拖拽三板斧:
    onmousedown
    onmousemove
    onmouseup
    */
    	window.onload = function(){
    		var div = document.getElementById('drag');
    		div.onmousedown = function(e){
    			e = e || window.event;
    			// 获取 鼠标到盒子的距离
    			var disX = e.clientX - this.offsetLeft;
    			var disY = e.clientY - this.offsetTop;
    			var that = this;
    			document.onmousemove = function(e){
    				// (动态)获取盒子到浏览器的距离
    				var limitX = e.clientX - disX;
    				var limitY = e.clientY - disY;
    				if(limitX<0){
    					limitX = 0;
    				}
    				// documentElement html根节点
    				else if(limitX>document.documentElement.clientWidth - that.offsetWidth){
    					limitX = document.documentElement.clientWidth - that.offsetWidth;
    				}
    				if(limitY<0){
    					limitY = 0;
    				}else if(limitY>document.documentElement.clientHeight - that.offsetHeight){
    					limitY = document.documentElement.clientHeight - that.offsetHeight
    				}

    				that.style.left = limitX + 'px';
    				that.style.top = limitY + 'px';
    			}
    			document.onmouseup = function(){
    				document.onmousemove = null;
    				document.onmouseup = null;
    				// 兼容IE的 释放默认事件
    				that.releaseCapture && that.releaseCapture();
    			}
    			// 兼容IE的组织默认事件，capture为捕获的意思
                // 捕获鼠标事件 ??
    			this.setCapture && this.setCapture();
    			return false;
    		}
    	}
    </script>
</head>
<body>
	<div id="drag">拖拽</div>
</body>
</html>