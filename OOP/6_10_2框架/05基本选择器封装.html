<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>基本选择器封装</title>
	<style>
		div,
   		 p {
        width: 300px;
        height: 30px;
        border: solid 1px red;
        margin-top: 5px;
    }
	</style>
	<script>
		var getId = function(id){
			var result = [];
			[].push.call(result,document.getElementById(id));
			return result;
		}
		// 封装获取类名
		var getClass = function(className){
			var result = [];
			console.dir(result);
			[].push.apply(result,document.getElementsByClassName(className));
			return result;
		}
		// 封装获取标签
		var getTag = function(tag){
			var result = [];
			[].push.apply(result,document.getElementsByTagName(tag));
			return result;
		}


		//#id .className div
		// var select = function(selector){
		// 	/*
		// 	^以某字符开始
		// 	$以某字符结束
		// 	+ 至少有一个这样的字符
		// 	| 或
		// 	*/ 
		// 	var reg =/(^#\w+$)|(^\.\w+$)|(^\w+$)/;
		// 	// 获取了默认有3项数据的数组
		// 	var type = reg.exec(selector);
		// 	console.log(type);
		// 	var result = [];
		// 	// id 在索引1 ，类名在2，标签在3 
		// 	if(type[1]){
		// 		// slice(1)把前缀截取掉
		// 		result = getId(type[1].slice(1));
		// 	}else if(type[2]){
		// 		result = getClass(type[2].slice(1));
		// 	}else if(type[3]){
		// 		result = getTag(type[3]);
		// 	}
		// 	return result;
		// }


		// each封装方法
		function each(arr,fn){
			for(var i=0;i<arr.length;i++){
				var flag = fn.call(arr[i],i,arr[i]);
				if(flag === false){
					break;
				}
			}
		}

		var select = function(selector){
			var result = [];
			// charAt()获取索引值位置的字符
			var firstChar = selector.charAt(0);
			switch(firstChar){
				case '#':
					result = getId(selector.slice(1));
					break;
				case '.':
					result = getClass(selector.slice(1));
					break;
				default:
					result = getTag(selector);
					break;		
			}
			return result;
		}

		window.onload = function(){
			var cDiv = select('#testId');
			each(cDiv,function(){
				this.style.background = 'green';
			});
			var cActive = select('.active');
			each(cActive,function(){
				this.style.background = 'orange';
			});
			var cP = select('div');
			each(cP,function(){
				this.style.background = 'blue';
			});
			
			
		}
	</script>
</head>
<body>
	<div></div>
    <div></div>
    <div></div>
    <p class="active"></p>
    <p class="active"></p>
    <p class="active"></p>
    <p id="testId"></p>
    <p></p>
</body>
</html>