<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Getter</title>
	<style type="text/css">

	</style>
	<script src="../2.1.8/vue.min.js"></script>
	<script src="../2.1.8/vuex.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/es6-promise@4/dist/es6-promise.auto.js"></script>
</head>
<body>
	
	<div id='app'>
		
	</div>
	<script>
		var vm = new Vue({
			el: '#app',
			data: {},

			// 有时候我们需要从 store 中的 state 中派生出一些状态，例如对列表进行过滤并计数：
			// computed: {
			// 	doneTodosCount() {
			// 		return this.$store.state.todos.filter(todo => todo.done).length
			// 	}
			// }			
		})

		/*
			Vuex 允许我们在 store 中定义“getter”（可以认为是 store 的计算属性）。就像计算属性一样，getter 的返回值会根据它的依赖被缓存起来，且只有当它的依赖值发生了改变才会被重新计算。

			Getter 接受 state 作为其第一个参数：
		*/

		const store = new Vuex.Store({
			state: {
				todos: [
					{id: 1, text: '...', done: true},
					{id: 2, text: '...', done: false}
				]
			},
			getters: {
				doneTodos: state => {
					return state.todos.filter(todo => todo.done)
				}
			}
		})
		
	</script>
</body>
</html>